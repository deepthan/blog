<!--
 * @file: 
 * @author: linkun.he
 * @Date: 2020-01-19 08:43:36
 -->
<style type="text/css">
  /* don't remove. */

  .index-cover {
    height: 100vh;
  }

  .page-wrap {
    width: 100%;
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-flex: 1;
    -ms-flex: auto;
    flex: auto;
    -ms-flex-direction: row;
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    flex-direction: row;
    background: #f0f2f5;
    height: calc(100vh - 64px);
    height: -webkit-calc(100vh- 64px);
    height: -moz-calc(100vh - 64px);
  }
  .left-wrap {
    position: relative;
    -webkit-box-shadow: 2px 0 8px 0 rgba(29, 35, 41, 0.05);
    box-shadow: 2px 0 8px 0 rgba(29, 35, 41, 0.05);
    -webkit-transition: all 0.2s;
    transition: all 0.2s;
    -webkit-box-flex: 0;
    -ms-flex: 0 0 256px;
    flex: 0 0 256px;
    padding-top: 15px;
    overflow-y: auto;
    background-image: url('../medias/body-bg.png') ;
    background-color: #E8DCCA;
  }
  .right-wrap {
    width: calc(100% - 256px);
    width: -webkit-calc(100% - 256px);
    overflow: hidden;
    background-image: url('../medias/body-bg.png') ;
  }
</style>

<div class="page-wrap">
  <div class="left-wrap">
    <%- partial('_widget/menu') %>
  </div>
  <div class="right-wrap">
    <!-- <%- partial('_partial/bg-cover') %> -->

    <main class="content">
      <!-- <% if (theme.dream.enable) { %>
      <div class="container notice">
        <div class="card">
          <div class="card-content">
            <i class="fa fa-volume-up fa-lg fa-fw text-color"></i>
            <%= theme.dream.text %>
          </div>
        </div>
      </div>
      <% } %> -->

      <div id="recommend-sections">
        <% if (page.current === 1) { %> <%- partial('_widget/recommend') %> <% }
        %>
      </div>

      <% var hashCode = function (str) { if (!str && str.length === 0) { return
      0; } var hash = 0; for (var i = 0, len = str.length; i < len; i++) { hash
      = ((hash << 5) - hash) + str.charCodeAt(i); hash |= 0; } return hash; };
      %>

      <!-- 所有文章卡片 -->
      <article id="articles" class="container articles" style="display: none">
        <div class="row article-row">
          <% page.posts.forEach(post => { %>
          <div class="article col s12 m6 l4" data-aos="zoom-in">
            <div class="card">
              <a href="<%- url_for(post.path) %>">
                <div class="card-image">
                  <% if (post.img) { %>
                  <img
                    src="<%= post.img %>"
                    class="responsive-img"
                    alt="<%- post.title %>"
                  />
                  <% } else { %> <% var featureimg =
                  '/medias/featureimages/0.jpg'; var featureImages =
                  theme.featureImages; if (!featureImages ||
                  featureImages.length == 0) { return featureimg; } var len =
                  featureImages.length; var num = Math.abs(hashCode(post.title)
                  % len); featureimg = featureImages[num]; %>
                  <img
                    src="<%- featureimg %>"
                    class="responsive-img"
                    alt="<%- post.title %>"
                  />
                  <% } %>
                  <span class="card-title"><%- post.title %></span>
                </div>
              </a>

              <div class="card-content article-content">
                <div class="summary">
                  <% if (post.summary && post.summary.length > 0) { %> <%-
                  post.summary %> <% } else { %> <%-
                  strip_html(post.content).substring(0, 70) %> <% } %>
                </div>
                <div class="publish-info">
                  <span class="publish-date">
                    <i class="fa fa-clock-o fa-fw icon-date"></i><%=
                    date(post.date, config.date_format) %>
                  </span>
                  <span class="publish-author">
                    <% if (post.categories && post.categories.length > 0) { %>
                    <i class="fa fa-bookmark fa-fw icon-category"></i>
                    <% post.categories.forEach(category => { %>
                    <a
                      href="<%- url_for(category.path) %>"
                      class="post-category"
                      target="_blank"
                    >
                      <%- category.name %>
                    </a>
                    <% }); %> <% } else if (post.author && post.author.length >
                    0) { %>
                    <i class="fa fa-user fa-fw"></i>
                    <%- post.author %> <% } else { %>
                    <i class="fa fa-user fa-fw"></i>
                    <%- config.author %> <% } %>
                  </span>
                </div>
              </div>

              <% if(post.tags && post.tags.length > 0) { %>
              <div class="card-action article-tags">
                <% post.tags.forEach(tag => { %>
                <a href="<%- url_for(tag.path) %>" target="_blank">
                  <span class="chip bg-color"><%= tag.name %></span>
                </a>
                <% }); %>
              </div>
              <% } %>
            </div>
          </div>
          <% }); %>
        </div>
      </article>
    </main>
  </div>
</div>
